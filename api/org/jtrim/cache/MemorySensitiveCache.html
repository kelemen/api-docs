<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="hu">
<head>
<!-- Generated by javadoc (version 1.7.0_13) on Wed Oct 16 20:52:36 CEST 2013 -->
<title>MemorySensitiveCache (JTrim 1.7.1 - All modules)</title>
<meta name="date" content="2013-10-16">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MemorySensitiveCache (JTrim 1.7.1 - All modules)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jtrim/cache/MemoryHeavyObject.html" title="interface in org.jtrim.cache"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jtrim/cache/ObjectCache.html" title="interface in org.jtrim.cache"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jtrim/cache/MemorySensitiveCache.html" target="_top">Frames</a></li>
<li><a href="MemorySensitiveCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jtrim.cache</div>
<h2 title="Class MemorySensitiveCache" class="title">Class MemorySensitiveCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.jtrim.cache.MemorySensitiveCache</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/jtrim/cache/ObjectCache.html" title="interface in org.jtrim.cache">ObjectCache</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="strong">MemorySensitiveCache</span>
extends java.lang.Object
implements <a href="../../../org/jtrim/cache/ObjectCache.html" title="interface in org.jtrim.cache">ObjectCache</a></pre>
<div class="block">A cache implementation which limits the maximum cumulative size of the
 objects stored. There is also a user specified limit on the maximum number of
 objects to be cached.
 <P>
 This implementation favors object implementing the <a href="../../../org/jtrim/cache/MemoryHeavyObject.html" title="interface in org.jtrim.cache"><code>MemoryHeavyObject</code></a>
 interface. The size of such objects are requested through
 <a href="../../../org/jtrim/cache/MemoryHeavyObject.html#getApproxMemorySize()"><code>MemoryHeavyObject.getApproxMemorySize()</code></a> method call. Other objects
 (not implementing <code>MemoryHeavyObject</code>) assumed to have a size of
 128 bytes. Note that the minimum size of an object is always assumed to be
 at least 128 bytes overriding the size returned by the object to be cached.
 The size of the object is not expected to change while the object is in the
 cache and is retrieved only once while the object is in the cache.
 <P>
 <code>MemorySensitiveCache</code> works by holding hard references to cached
 objects, so soft and weak references will not be garbage collected
 as long as these objects are in the cache. Note that this cache will not
 maintain hard references to objects when a <a href="../../../org/jtrim/cache/ReferenceType.html#HardRefType"><code>ReferenceType.HardRefType</code></a>
 is requested because such references will still reachable as long as there is
 hard reference to the returned <a href="../../../org/jtrim/cache/VolatileReference.html" title="interface in org.jtrim.cache"><code>volatile reference</code></a>
 and the cache cannot efficiently check if those volatile references were
 garbage collected.
 <P>
 When the cache cannot hold anymore references (either because there too many
 references or their cumulative size is too large) it will remove the object
 earliest referenced from the cache. The object can be referenced either by
 creating a new reference to it or by retrieving it though a returned
 volatile reference.
 <P>
 When users are reasoning about the memory consumption of their code, they
 should assume that this cache holds to the maximum number of allowed
 references and those references are useless.

 <h3>Thread safety</h3>
 This class is completely thread-safe and its methods can be called from any
 thread.
 <h4>Synchronization transparency</h4>
 The methods of this class are <I>synchronization transparent</I>, so they can
 be called in any context (e.g.: while holding a lock).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#MemorySensitiveCache(long)">MemorySensitiveCache</a></strong>(long&nbsp;maximumCacheSize)</code>
<div class="block">Initializes an empty cache with the given maximum cumulative size of
 cached objects.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#MemorySensitiveCache(long, int)">MemorySensitiveCache</a></strong>(long&nbsp;maximumCacheSize,
                    int&nbsp;maximumObjectsToCache)</code>
<div class="block">Initializes an empty cache with the given maximum number and maximum
 cumulative size of cached objects.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#clearCache()">clearCache</a></strong>()</code>
<div class="block">Removes every cached reference from this cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#getCurrentSize()">getCurrentSize</a></strong>()</code>
<div class="block">Returns the cumulative size of the currently cached objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#getMaximumCacheSize()">getMaximumCacheSize</a></strong>()</code>
<div class="block">Returns the maximum allowed cumulative size of the cached objects.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#getMaximumObjectsToCache()">getMaximumObjectsToCache</a></strong>()</code>
<div class="block">Returns the maximum number of cached objects allowed in this cache
 concurrently.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&lt;V&gt;&nbsp;<a href="../../../org/jtrim/cache/VolatileReference.html" title="interface in org.jtrim.cache">VolatileReference</a>&lt;V&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#getReference(V, org.jtrim.cache.ReferenceType)">getReference</a></strong>(V&nbsp;obj,
            <a href="../../../org/jtrim/cache/ReferenceType.html" title="enum in org.jtrim.cache">ReferenceType</a>&nbsp;refType)</code>
<div class="block">Returns a new volatile cached reference of the given object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/cache/MemorySensitiveCache.html#toString()">toString</a></strong>()</code>
<div class="block">Returns the string representation of this cache in no
 particular format.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MemorySensitiveCache(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MemorySensitiveCache</h4>
<pre>public&nbsp;MemorySensitiveCache(long&nbsp;maximumCacheSize)</pre>
<div class="block">Initializes an empty cache with the given maximum cumulative size of
 cached objects. The maximum number of cached objects is 1024.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maximumCacheSize</code> - the maximum cumulative size of cached
   objects. This argument must be larger than zero.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - thrown if the argument is zero or
   a negative integer</dd></dl>
</li>
</ul>
<a name="MemorySensitiveCache(long, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MemorySensitiveCache</h4>
<pre>public&nbsp;MemorySensitiveCache(long&nbsp;maximumCacheSize,
                    int&nbsp;maximumObjectsToCache)</pre>
<div class="block">Initializes an empty cache with the given maximum number and maximum
 cumulative size of cached objects.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maximumCacheSize</code> - the maximum cumulative size of cached
   objects. This argument must be larger than zero.</dd><dd><code>maximumObjectsToCache</code> - the maximum number of objects to cache.
   This argument must be larger than zero.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - thrown if any of the arguments is zero
   or a negative integer</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="clearCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearCache</h4>
<pre>public&nbsp;void&nbsp;clearCache()</pre>
<div class="block">Removes every cached reference from this cache. The already returned
 volatile references may still remain valid if they are referenced
 as a soft or weak reference. Note however that any returned volatile
 reference with the <a href="../../../org/jtrim/cache/ReferenceType.html#UserRefType"><code>ReferenceType.UserRefType</code></a> will return
 <code>null</code> after this method returns.</div>
</li>
</ul>
<a name="getCurrentSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentSize</h4>
<pre>public&nbsp;long&nbsp;getCurrentSize()</pre>
<div class="block">Returns the cumulative size of the currently cached objects.
 This method never returns a negative integer and always returns a value
 lower than <a href="../../../org/jtrim/cache/MemorySensitiveCache.html#getMaximumCacheSize()"><code>getMaximumCacheSize()</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the cumulative size of the currently cached objects</dd></dl>
</li>
</ul>
<a name="getMaximumCacheSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaximumCacheSize</h4>
<pre>public&nbsp;long&nbsp;getMaximumCacheSize()</pre>
<div class="block">Returns the maximum allowed cumulative size of the cached objects.
 The result of this method is the same as it was specified at construction
 time and never changes during the lifetime of this cache.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the maximum allowed cumulative size of the cached objects</dd></dl>
</li>
</ul>
<a name="getMaximumObjectsToCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaximumObjectsToCache</h4>
<pre>public&nbsp;int&nbsp;getMaximumObjectsToCache()</pre>
<div class="block">Returns the maximum number of cached objects allowed in this cache
 concurrently.
 The result of this method is the same as it was specified at construction
 time and never changes during the lifetime of this cache.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the maximum number of cached objects allowed in this cache
   concurrently</dd></dl>
</li>
</ul>
<a name="getReference(java.lang.Object,org.jtrim.cache.ReferenceType)">
<!--   -->
</a><a name="getReference(V, org.jtrim.cache.ReferenceType)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReference</h4>
<pre>public&nbsp;&lt;V&gt;&nbsp;<a href="../../../org/jtrim/cache/VolatileReference.html" title="interface in org.jtrim.cache">VolatileReference</a>&lt;V&gt;&nbsp;getReference(V&nbsp;obj,
                                    <a href="../../../org/jtrim/cache/ReferenceType.html" title="enum in org.jtrim.cache">ReferenceType</a>&nbsp;refType)</pre>
<div class="block">Returns a new volatile cached reference of the given object.
 The passed object will be cached at the discretion of the
 implementation.
 <P>
 If the implementation chooses the cache the
 passed object, the volatile reference should keep returning
 the cached object (unless the reference was cleared) as long as the
 cached object is in the cache. In case the cached object is removed
 from the cache for any reason, the volatile reference may keep
 returning it (e.g.: using soft or weak references).
 <P>
 Note that <a href="../../../org/jtrim/cache/VolatileReference.html#clear()"><code>clearing</code></a> the reference
 will not necessarily remove the object from this cache but
 implementations should (but not required) do so if every returned
 volatile reference of the passed object is cleared.
 <P>
 Note that in most cases the used reference type is recommended to be
 <a href="../../../org/jtrim/cache/ReferenceType.html#WeakRefType"><code>ReferenceType.WeakRefType</code></a> or <a href="../../../org/jtrim/cache/ReferenceType.html#SoftRefType"><code>ReferenceType.SoftRefType</code></a>,
 so the object will effectively remain cached unless the JVM decides that
 it needs more memory. The main reason not to use them is that these
 references (if reachable) will cause a small performance penalty for the
 garbage collector.
 <h5>Additional information</h5>
 This cache will not maintain references to objects if they were requested
 as <a href="../../../org/jtrim/cache/ReferenceType.html#NoRefType"><code>ReferenceType.NoRefType</code></a> or <a href="../../../org/jtrim/cache/ReferenceType.html#HardRefType"><code>ReferenceType.HardRefType</code></a>.
 In case one of these two types is specified an unmaintained reference
 will be returned (as returned by
 <a href="../../../org/jtrim/cache/GenericReference.html#createReference(T, org.jtrim.cache.ReferenceType)"><code>GenericReference.createReference(Object, ReferenceType)</code></a>).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/jtrim/cache/ObjectCache.html#getReference(V, org.jtrim.cache.ReferenceType)">getReference</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/jtrim/cache/ObjectCache.html" title="interface in org.jtrim.cache">ObjectCache</a></code></dd>
<dt><span class="strong">Type Parameters:</span></dt><dd><code>V</code> - the type of the cached object</dd><dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - the object to be cached. The returned volatile reference will
   return this object or <code>null</code>. This argument can be <code>null</code>
   but in this case the returned reference will always return
   <code>null</code> and is effectively useless.</dd><dd><code>refType</code> - the type of the reference to be used if the passed
   object was removed from this cache. Implementations are expected
   to honor this argument but may ignore it if they document it so.
   This argument cannot be <code>null</code>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the volatile reference of the passed object (<code>obj</code>). This
   method must never return <code>null</code>.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">Returns the string representation of this cache in no
 particular format.
 <P>
 This method is intended to be used for debugging only.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the string representation of this object in no particular format.
   This method never returns <code>null</code>.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jtrim/cache/MemoryHeavyObject.html" title="interface in org.jtrim.cache"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jtrim/cache/ObjectCache.html" title="interface in org.jtrim.cache"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jtrim/cache/MemorySensitiveCache.html" target="_top">Frames</a></li>
<li><a href="MemorySensitiveCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
