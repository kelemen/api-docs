<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="hu">
<head>
<!-- Generated by javadoc (version 1.7.0_13) on Thu Mar 13 00:55:10 CET 2014 -->
<title>TaskScheduler (JTrim 1.7.3 - All modules)</title>
<meta name="date" content="2014-03-13">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TaskScheduler (JTrim 1.7.3 - All modules)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jtrim/concurrent/Tasks.html" title="class in org.jtrim.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jtrim/concurrent/TaskState.html" title="enum in org.jtrim.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jtrim/concurrent/TaskScheduler.html" target="_top">Frames</a></li>
<li><a href="TaskScheduler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jtrim.concurrent</div>
<h2 title="Class TaskScheduler" class="title">Class TaskScheduler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.jtrim.concurrent.TaskScheduler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="strong">TaskScheduler</span>
extends java.lang.Object</pre>
<div class="block">Allows tasks to be <a href="../../../org/jtrim/concurrent/TaskScheduler.html#scheduleTask(java.lang.Runnable)"><code>scheduled</code></a> then be
 <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>executed</code></a> later by an <code>Executor</code> or
 <a href="../../../org/jtrim/concurrent/TaskExecutor.html" title="interface in org.jtrim.concurrent"><code>TaskExecutor</code></a>. The tasks will be submitted to the executor in the
 order they were scheduled.
 <P>
 The main benefit of using this class is that scheduling a task is
 <I>synchronization transparent</I> and therefore can be called while a lock
 is held. Since submitting task happens in the same order as the scheduling
 this can be used to invoke event handlers because with events it is usually
 important to notify the listeners in the order the events actually occurred.
 <P>
 It is important to note that to achieve the aforementioned goals tasks will
 never be submitted concurrently, they will be executed one after another.
 An additional useful side-effect is that tasks will not even be submitted
 while another task is being executed on the current thread avoiding another
 possible source of problems. To clarify this, see the following example:
 <PRE>
 class PrintTask implements Runnable {
   private final String message;

   public PrintTask(String message) {
     this.message = message;
   }

   public void run() {
     System.out.print(message);
   }
 }

 void doPrint() {
   final TaskScheduler scheduler;
   scheduler = new TaskScheduler(SyncTaskExecutor.getSimpleExecutor());
   scheduler.scheduleTask(new Runnable() {
     public void run() {
       System.out.print("2");
       scheduler.scheduleTask(new PrintTask("4"));
       scheduler.dispatchTasks(); // In this case, this is a no-op
       System.out.print("3");
     }
   });
   System.out.print("1");
   // The next method call will execute both the above scheduled tasks.
   scheduler.dispatchTasks();
   System.out.print("5");
 }
 </PRE>
 The above <code>doPrint()</code> method will always print "12345" and the
 <code>scheduler.dispatchTasks()</code> call in the scheduled task will actually
 do nothing in this case but return immediately.
 <P>
 The behaviour of this class can also be exploited to "synchronize" actions
 without locking, so even tasks not being <I>synchronization transparent</I>
 and also not thread-safe can be used safely using this class. This is the
 feature what the <a href="../../../org/jtrim/concurrent/TaskExecutors.html#inOrderExecutor(org.jtrim.concurrent.TaskExecutor)"><code>TaskExecutors.inOrderExecutor(TaskExecutor)</code></a> and
 <a href="../../../org/jtrim/concurrent/TaskExecutors.html#inOrderSyncExecutor()"><code>TaskExecutors.inOrderSyncExecutor()</code></a> classes provide.

 <h3>Dangers of using this class</h3>
 At first blink it seems tempting to use this class instead of locks because
 unlike with locks, methods of this class never block and cannot cause
 dead-locks unless the submitted tasks wait for each other. While this is
 true, there are three issues to consider:
 <ul>
  <li>
   Using <code>TaskScheduler</code> has a higher per task overhead than using a
   lock.
  </li>
  <li>
   Usually there is no telling in which <code>dispatchTasks()</code> method will
   a particular task execute. This may add some additional non-determinism,
   making debugging possibly harder.
  </li>
  <li>
   Using locks cause tasks (and the executing threads) to wait for each other,
   resulting in a natural throttling. <code>TaskScheduler</code> however maintains
   a list of not yet executed tasks and this can lead to
   <code>OutOfMemoryError</code> if tasks are scheduled faster than can be
   submitted to the executor by a single thread. Notice that with locks
   the number of such tasks waiting to be executed is limited by the number
   of threads (which should not be too high).
  </li>
 </ul>
 Therefore only use this class when locks are not an option. That is, favor
 locks when they are safe to use. One of the good use of this class is to
 notify event listeners.

 <h3>Thread safety</h3>
 The methods of this class are safe to use by multiple threads concurrently.

 <h4>Synchronization transparency</h4>
 Other than the <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>dispatchTasks()</code></a> method, methods of
 this class are <I>synchronization transparent</I>. The
 <code>dispatchTasks()</code> method is not <I>synchronization transparent</I>
 only because it submits tasks to the underlying <code>Executor</code>. If
 submitting tasks to the underlying executor is
 <I>synchronization transparent</I> then even this method is
 <I>synchronization transparent</I>.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/jtrim/concurrent/TaskExecutors.html#inOrderExecutor(org.jtrim.concurrent.TaskExecutor)"><code>TaskExecutors.inOrderExecutor(TaskExecutor)</code></a>, 
<a href="../../../org/jtrim/concurrent/TaskExecutors.html#inOrderSyncExecutor()"><code>TaskExecutors.inOrderSyncExecutor()</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#TaskScheduler(java.util.concurrent.Executor)">TaskScheduler</a></strong>(java.util.concurrent.Executor&nbsp;executor)</code>
<div class="block">Creates a new task scheduler (without any task scheduled) with the given
 backing executor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#TaskScheduler(org.jtrim.concurrent.TaskExecutor)">TaskScheduler</a></strong>(<a href="../../../org/jtrim/concurrent/TaskExecutor.html" title="interface in org.jtrim.concurrent">TaskExecutor</a>&nbsp;executor)</code>
<div class="block">Creates a new task scheduler (without any task scheduled) with the given
 backing executor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()">dispatchTasks</a></strong>()</code>
<div class="block">Calling this method ensures that previously scheduled tasks will be
 submitted to the executor specified at construction time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#isCurrentThreadDispatching()">isCurrentThreadDispatching</a></strong>()</code>
<div class="block">Checks whether this method was invoked from a
 <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>dispatchTasks()</code></a> method call (i.e.: a task is
 being submitted on the current calling thread).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../org/jtrim/concurrent/TaskScheduler.html" title="class in org.jtrim.concurrent">TaskScheduler</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#newSyncScheduler()">newSyncScheduler</a></strong>()</code>
<div class="block">A convenience method effectively equivalent to
 <code>new TaskScheduler(SyncTaskExecutor.getSimpleExecutor())</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#scheduleTask(java.lang.Runnable)">scheduleTask</a></strong>(java.lang.Runnable&nbsp;task)</code>
<div class="block">Schedules a single task for submitting to the executor specified at
 construction time.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#scheduleTasks(java.util.List)">scheduleTasks</a></strong>(java.util.List&lt;? extends java.lang.Runnable&gt;&nbsp;tasks)</code>
<div class="block">Schedules a list of tasks for submitting to the executor specified at
 construction time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/jtrim/concurrent/TaskScheduler.html#toString()">toString</a></strong>()</code>
<div class="block">Returns the string representation of this <code>TaskScheduler</code> in no
 particular format.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TaskScheduler(java.util.concurrent.Executor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TaskScheduler</h4>
<pre>public&nbsp;TaskScheduler(java.util.concurrent.Executor&nbsp;executor)</pre>
<div class="block">Creates a new task scheduler (without any task scheduled) with the given
 backing executor.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>executor</code> - the executor to which tasks will be submitted to by the
   <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>dispatchTasks()</code></a> method. This argument cannot
   be <code>null</code>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.NullPointerException</code> - thrown if the specified executor is
   <code>null</code></dd></dl>
</li>
</ul>
<a name="TaskScheduler(org.jtrim.concurrent.TaskExecutor)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TaskScheduler</h4>
<pre>public&nbsp;TaskScheduler(<a href="../../../org/jtrim/concurrent/TaskExecutor.html" title="interface in org.jtrim.concurrent">TaskExecutor</a>&nbsp;executor)</pre>
<div class="block">Creates a new task scheduler (without any task scheduled) with the given
 backing executor.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>executor</code> - the executor to which tasks will be submitted to by the
   <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>dispatchTasks()</code></a> method. This argument cannot
   be <code>null</code>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.NullPointerException</code> - thrown if the specified executor is
   <code>null</code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newSyncScheduler()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newSyncScheduler</h4>
<pre>public static&nbsp;<a href="../../../org/jtrim/concurrent/TaskScheduler.html" title="class in org.jtrim.concurrent">TaskScheduler</a>&nbsp;newSyncScheduler()</pre>
<div class="block">A convenience method effectively equivalent to
 <code>new TaskScheduler(SyncTaskExecutor.getSimpleExecutor())</code>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a new task scheduler with a
   <code>SyncTaskExecutor.getSimpleExecutor()</code> underlying executor. This
   method never returns <code>null</code> and always returns a new instance.</dd></dl>
</li>
</ul>
<a name="scheduleTask(java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleTask</h4>
<pre>public&nbsp;void&nbsp;scheduleTask(java.lang.Runnable&nbsp;task)</pre>
<div class="block">Schedules a single task for submitting to the executor specified at
 construction time.
 <P>
 This method will not actually submit the task, to
 do this call the <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>dispatchTasks()</code></a> method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>task</code> - the task to be scheduled for submitting to the executor
   specified at construction time. This argument cannot be <code>null</code>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.NullPointerException</code> - thrown if the specified task is <code>null</code></dd></dl>
</li>
</ul>
<a name="scheduleTasks(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scheduleTasks</h4>
<pre>public&nbsp;void&nbsp;scheduleTasks(java.util.List&lt;? extends java.lang.Runnable&gt;&nbsp;tasks)</pre>
<div class="block">Schedules a list of tasks for submitting to the executor specified at
 construction time. The tasks will be scheduled in the order defined by
 the given list.
 <P>
 This method will not actually submit the task, to
 do this call the <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>dispatchTasks()</code></a> method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tasks</code> - the list of tasks to be scheduled for submitting to the
   executor specified at construction time. This argument cannot be
   <code>null</code> and cannot contain <code>null</code> elements.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.NullPointerException</code> - thrown if the specified <code>tasks</code> is
   <code>null</code> or contains <code>null</code> elements</dd></dl>
</li>
</ul>
<a name="dispatchTasks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchTasks</h4>
<pre>public&nbsp;void&nbsp;dispatchTasks()</pre>
<div class="block">Calling this method ensures that previously scheduled tasks will be
 submitted to the executor specified at construction time. Note that tasks
 may actually be submitted in different <code>dispatchTasks()</code> method
 call but calling this method ensures that they will be submitted.
 <P>
 In case submitting a task causes an exception to be thrown, the
 <code>dispatchTasks()</code> method actually submitting that task will
 propagate that exception to the caller. Note however that a single
 <code>dispatchTasks()</code> call can submit multiple tasks and if more than
 one throws an exception, the exceptions after the first one will be
 suppressed (See: <code>Throwable.addSuppressed(Throwable)</code>).</div>
</li>
</ul>
<a name="isCurrentThreadDispatching()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCurrentThreadDispatching</h4>
<pre>public&nbsp;boolean&nbsp;isCurrentThreadDispatching()</pre>
<div class="block">Checks whether this method was invoked from a
 <a href="../../../org/jtrim/concurrent/TaskScheduler.html#dispatchTasks()"><code>dispatchTasks()</code></a> method call (i.e.: a task is
 being submitted on the current calling thread).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if this method was invoked from a
   <code>dispatchTasks()</code>, <code>false</code> otherwise</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">Returns the string representation of this <code>TaskScheduler</code> in no
 particular format. The string representation will contain the number of
 tasks current waiting to be submitted.
 <P>
 This method is intended to be used for debugging only.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the string representation of this object in no particular format.
   This method never returns <code>null</code>.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/jtrim/concurrent/Tasks.html" title="class in org.jtrim.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/jtrim/concurrent/TaskState.html" title="enum in org.jtrim.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jtrim/concurrent/TaskScheduler.html" target="_top">Frames</a></li>
<li><a href="TaskScheduler.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
