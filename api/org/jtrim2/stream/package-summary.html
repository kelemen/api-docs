<!DOCTYPE HTML>
<html lang="hu">
<head>
<!-- Generated by javadoc (17) -->
<title>org.jtrim2.stream (jtrim-stream 2.0.5 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.jtrim2.stream">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#package">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li>Related Packages&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package org.jtrim2.stream" class="title">Package org.jtrim2.stream</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">org.jtrim2.stream</span></div>
<section class="package-description" id="package-description">
<div class="block">Contains classes and interfaces for synchronous stream processing. This API
 was not designed to supplement Java's <code>Stream</code> API, but rather replaces
 it in many circumstances, or provides feature not easily feasible there.
 <P>
 The main goal of this API is to allow developers to create simple
 implementations producing and consuming streams. Many common implementations
 are already present in this package.
 <P>
 Notable implementations are collecting elements of a stream into batches or
 easily allowing producers and consumers to run concurrently yet keeping
 producer and consumer implementations simple. See the following complex
 example for an example usage:
 <pre><code>
 void runFileMergeDemo(Path dir) throws Exception {
   newLineReaderProducer(dir.resolve("demo-src1.txt"))
       .toFluent()
       .concat(newLineReaderProducer(dir.resolve("demo-src2.txt")))
       .concat(newLineReaderProducer(dir.resolve("demo-src3.txt")))
       .batch(1000)
       .toSingleGroupProducer()
       .toBackground("mapper-executor", 1, 0)
       .apply(SeqGroupProducer::flatteningProducer)
       .map(newJobMapper())
       .batch(1000)
       .toBackground("writer-executor", 1, 0)
       .apply(SeqGroupProducer::flatteningProducer)
       .withSingleShotSeqConsumer(
           newLineWriterConsumerDef(dir.resolve("demo-dest.txt"))
           .toFluent()
           .&lt;String&gt;thenContextFree(job -&gt; System.out.println(transformJob(job, "logger")))
           .unwrap()
       )
       .execute(Cancellation.UNCANCELABLE_TOKEN);
 }

 String transformJob(String job, String step) {
   String threadName = Thread.currentThread().getName();
   return job + "-" + step + "(" + threadName + ")";
 }

 SeqProducer&lt;String&gt; newLineReaderProducer(Path srcFile) {
   return (cancelToken, consumer) -&gt; {
     try (BufferedReader source = Files.newBufferedReader(srcFile, StandardCharsets.UTF_8)) {
       String line;
       while ((line = source.readLine()) != null) {
         cancelToken.checkCanceled();
         consumer.processElement(transformJob(line, "reader"));
       }
     }
   };
 }

 SeqConsumer&lt;Object&gt; newLineWriterConsumerDef(Path destFile) {
   return (cancelToken, producer) -&gt; {
     try (Writer writer = Files.newBufferedWriter(destFile, StandardCharsets.UTF_8)) {
       producer.transferAll(cancelToken, job -&gt; {
         cancelToken.checkCanceled();
         writer.write(transformJob(job.toString(), "writer") + ")\n");
       });
     }
   };
 }

 SeqMapper&lt;String, String&gt; newJobMapper() {
   return (cancelToken, producer, consumerDef) -&gt; {
     consumerDef.consumeAll(cancelToken, (producerCancelToken, consumer) -&gt; {
       producer.transferAll(producerCancelToken, job -&gt; {
         producerCancelToken.checkCanceled();
         consumer.processElement(transformJob(job, "mapper"));
       });
     });
   };
 }
 </code></pre>
 The above example reads the lines of 3 files into a single sequence maps the lines,
 then writes the mapped lines out to a single file while logging each line being persisted
 as an independent action. Aside from this, the above setup allows the reading and writing
 to run concurrently, and also batches lines to reduce overhead.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="SeqProducer.html" title="interface in org.jtrim2.stream"><code>SeqProducer</code></a></li>
<li><a href="SeqGroupProducer.html" title="interface in org.jtrim2.stream"><code>SeqGroupProducer</code></a></li>
<li><a href="SeqConsumer.html" title="interface in org.jtrim2.stream"><code>SeqConsumer</code></a></li>
<li><a href="SeqGroupConsumer.html" title="interface in org.jtrim2.stream"><code>SeqGroupConsumer</code></a></li>
<li><a href="SeqMapper.html" title="interface in org.jtrim2.stream"><code>SeqMapper</code></a></li>
<li><a href="SeqGroupMapper.html" title="interface in org.jtrim2.stream"><code>SeqGroupMapper</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel">
<div class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="ElementConsumer.html" title="interface in org.jtrim2.stream">ElementConsumer</a>&lt;T&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines an action processing element(s) of a stream of elements.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="ElementMapper.html" title="interface in org.jtrim2.stream">ElementMapper</a>&lt;T,<wbr>R&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Defines an action mapping a single element of a stream to zero or more elements.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="FluentSeqConsumer.html" title="class in org.jtrim2.stream">FluentSeqConsumer</a>&lt;T&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Defines a convenient fluent style builder for consumers processing a single
 sequence of elements.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="FluentSeqGroupConsumer.html" title="class in org.jtrim2.stream">FluentSeqGroupConsumer</a>&lt;T&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Defines a convenient fluent style builder for consumers processing a group of
 sequences of elements.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="FluentSeqGroupMapper.html" title="class in org.jtrim2.stream">FluentSeqGroupMapper</a>&lt;T,<wbr>R&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Defines a convenient fluent style builder for mappers mapping zero or more
 sequences of elements.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="FluentSeqGroupProducer.html" title="class in org.jtrim2.stream">FluentSeqGroupProducer</a>&lt;T&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Defines a convenient fluent style builder for producers producing a zero or more
 sequences of elements.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="FluentSeqMapper.html" title="class in org.jtrim2.stream">FluentSeqMapper</a>&lt;T,<wbr>R&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Defines a convenient fluent style builder for mappers mapping a single
 sequence of elements.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="FluentSeqProducer.html" title="class in org.jtrim2.stream">FluentSeqProducer</a>&lt;T&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Defines a convenient fluent style builder for producers producing a single
 sequence of elements.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="SeqConsumer.html" title="interface in org.jtrim2.stream">SeqConsumer</a>&lt;T&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines an action processing a sequence of elements.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="SeqGroupConsumer.html" title="interface in org.jtrim2.stream">SeqGroupConsumer</a>&lt;T&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Defines an action processing zero or more sequence of elements.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="SeqGroupMapper.html" title="interface in org.jtrim2.stream">SeqGroupMapper</a>&lt;T,<wbr>R&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines an action mapping zero or more sequence of elements.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="SeqGroupProducer.html" title="interface in org.jtrim2.stream">SeqGroupProducer</a>&lt;T&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Defines a source of zero or more sequences of elements.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="SeqMapper.html" title="interface in org.jtrim2.stream">SeqMapper</a>&lt;T,<wbr>R&gt;</div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines an action mapping a sequence of elements to another sequence of elements.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="SeqProducer.html" title="interface in org.jtrim2.stream">SeqProducer</a>&lt;T&gt;</div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block">Defines a source of a sequence of elements.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
</div>
</div>
</body>
</html>
