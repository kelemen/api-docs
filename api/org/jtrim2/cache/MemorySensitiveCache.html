<!DOCTYPE HTML>
<html lang="hu">
<head>
<!-- Generated by javadoc (17) -->
<title>MemorySensitiveCache (JTrim 2.0.5 - All modules)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.jtrim2.cache, class: MemorySensitiveCache">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.jtrim2.cache</a></div>
<h1 title="Class MemorySensitiveCache" class="title">Class MemorySensitiveCache</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.jtrim2.cache.MemorySensitiveCache</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="ObjectCache.html" title="interface in org.jtrim2.cache">ObjectCache</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">MemorySensitiveCache</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="ObjectCache.html" title="interface in org.jtrim2.cache">ObjectCache</a></span></div>
<div class="block">A cache implementation which limits the maximum cumulative size of the
 objects stored. There is also a user specified limit on the maximum number of
 objects to be cached.
 <P>
 This implementation favors object implementing the <a href="MemoryHeavyObject.html" title="interface in org.jtrim2.cache"><code>MemoryHeavyObject</code></a>
 interface. The size of such objects are requested through
 <a href="MemoryHeavyObject.html#getApproxMemorySize()"><code>MemoryHeavyObject.getApproxMemorySize()</code></a> method call. Other objects
 (not implementing <code>MemoryHeavyObject</code>) assumed to have a size of
 128 bytes. Note that the minimum size of an object is always assumed to be
 at least 128 bytes overriding the size returned by the object to be cached.
 The size of the object is not expected to change while the object is in the
 cache and is retrieved only once while the object is in the cache.
 <P>
 <code>MemorySensitiveCache</code> works by holding hard references to cached
 objects, so soft and weak references will not be garbage collected
 as long as these objects are in the cache. Note that this cache will not
 maintain hard references to objects when a <a href="ReferenceType.html#HardRefType"><code>ReferenceType.HardRefType</code></a>
 is requested because such references will still reachable as long as there is
 hard reference to the returned <a href="VolatileReference.html" title="interface in org.jtrim2.cache"><code>volatile reference</code></a>
 and the cache cannot efficiently check if those volatile references were
 garbage collected.
 <P>
 When the cache cannot hold anymore references (either because there too many
 references or their cumulative size is too large) it will remove the object
 earliest referenced from the cache. The object can be referenced either by
 creating a new reference to it or by retrieving it though a returned
 volatile reference.
 <P>
 When users are reasoning about the memory consumption of their code, they
 should assume that this cache holds to the maximum number of allowed
 references and those references are useless.

 <h2>Thread safety</h2>
 This class is completely thread-safe and its methods can be called from any
 thread.
 <h3>Synchronization transparency</h3>
 The methods of this class are <I>synchronization transparent</I>, so they can
 be called in any context (e.g.: while holding a lock).</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(long)" class="member-name-link">MemorySensitiveCache</a><wbr>(long&nbsp;maximumCacheSize)</code></div>
<div class="col-last even-row-color">
<div class="block">Initializes an empty cache with the given maximum cumulative size of
 cached objects.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(long,int)" class="member-name-link">MemorySensitiveCache</a><wbr>(long&nbsp;maximumCacheSize,
 int&nbsp;maximumObjectsToCache)</code></div>
<div class="col-last odd-row-color">
<div class="block">Initializes an empty cache with the given maximum number and maximum
 cumulative size of cached objects.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clearCache()" class="member-name-link">clearCache</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Removes every cached reference from this cache.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCurrentSize()" class="member-name-link">getCurrentSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the cumulative size of the currently cached objects.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaximumCacheSize()" class="member-name-link">getMaximumCacheSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the maximum allowed cumulative size of the cached objects.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMaximumObjectsToCache()" class="member-name-link">getMaximumObjectsToCache</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the maximum number of cached objects allowed in this cache
 concurrently.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>&lt;V&gt;&nbsp;<a href="VolatileReference.html" title="interface in org.jtrim2.cache">VolatileReference</a>&lt;V&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getReference(V,org.jtrim2.cache.ReferenceType)" class="member-name-link">getReference</a><wbr>(V&nbsp;obj,
 <a href="ReferenceType.html" title="enum class in org.jtrim2.cache">ReferenceType</a>&nbsp;refType)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a new volatile cached reference of the given object.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the string representation of this cache in no
 particular format.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(long)">
<h3>MemorySensitiveCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">MemorySensitiveCache</span><wbr><span class="parameters">(long&nbsp;maximumCacheSize)</span></div>
<div class="block">Initializes an empty cache with the given maximum cumulative size of
 cached objects. The maximum number of cached objects is 1024.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maximumCacheSize</code> - the maximum cumulative size of cached
   objects. This argument must be larger than zero.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - thrown if the argument is zero or
   a negative integer</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(long,int)">
<h3>MemorySensitiveCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">MemorySensitiveCache</span><wbr><span class="parameters">(long&nbsp;maximumCacheSize,
 int&nbsp;maximumObjectsToCache)</span></div>
<div class="block">Initializes an empty cache with the given maximum number and maximum
 cumulative size of cached objects.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maximumCacheSize</code> - the maximum cumulative size of cached
   objects. This argument must be larger than zero.</dd>
<dd><code>maximumObjectsToCache</code> - the maximum number of objects to cache.
   This argument must be larger than zero.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - thrown if any of the arguments is zero
   or a negative integer</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="clearCache()">
<h3>clearCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clearCache</span>()</div>
<div class="block">Removes every cached reference from this cache. The already returned
 volatile references may still remain valid if they are referenced
 as a soft or weak reference. Note however that any returned volatile
 reference with the <a href="ReferenceType.html#UserRefType"><code>ReferenceType.UserRefType</code></a> will return
 <code>null</code> after this method returns.</div>
</section>
</li>
<li>
<section class="detail" id="getCurrentSize()">
<h3>getCurrentSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getCurrentSize</span>()</div>
<div class="block">Returns the cumulative size of the currently cached objects.
 This method never returns a negative integer and always returns a value
 lower than <a href="#getMaximumCacheSize()"><code>getMaximumCacheSize()</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the cumulative size of the currently cached objects</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaximumCacheSize()">
<h3>getMaximumCacheSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getMaximumCacheSize</span>()</div>
<div class="block">Returns the maximum allowed cumulative size of the cached objects.
 The result of this method is the same as it was specified at construction
 time and never changes during the lifetime of this cache.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the maximum allowed cumulative size of the cached objects</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMaximumObjectsToCache()">
<h3>getMaximumObjectsToCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getMaximumObjectsToCache</span>()</div>
<div class="block">Returns the maximum number of cached objects allowed in this cache
 concurrently.
 The result of this method is the same as it was specified at construction
 time and never changes during the lifetime of this cache.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the maximum number of cached objects allowed in this cache
   concurrently</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getReference(V,org.jtrim2.cache.ReferenceType)">
<h3 id="getReference(java.lang.Object,org.jtrim2.cache.ReferenceType)">getReference</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="type-parameters">&lt;V&gt;</span>&nbsp;<span class="return-type"><a href="VolatileReference.html" title="interface in org.jtrim2.cache">VolatileReference</a>&lt;V&gt;</span>&nbsp;<span class="element-name">getReference</span><wbr><span class="parameters">(V&nbsp;obj,
 <a href="ReferenceType.html" title="enum class in org.jtrim2.cache">ReferenceType</a>&nbsp;refType)</span></div>
<div class="block">Returns a new volatile cached reference of the given object.
 The passed object will be cached at the discretion of the
 implementation.
 <P>
 If the implementation chooses the cache the
 passed object, the volatile reference should keep returning
 the cached object (unless the reference was cleared) as long as the
 cached object is in the cache. In case the cached object is removed
 from the cache for any reason, the volatile reference may keep
 returning it (e.g.: using soft or weak references).
 <P>
 Note that <a href="VolatileReference.html#clear()"><code>clearing</code></a> the reference
 will not necessarily remove the object from this cache but
 implementations should (but not required) do so if every returned
 volatile reference of the passed object is cleared.
 <P>
 Note that in most cases the used reference type is recommended to be
 <a href="ReferenceType.html#WeakRefType"><code>ReferenceType.WeakRefType</code></a> or <a href="ReferenceType.html#SoftRefType"><code>ReferenceType.SoftRefType</code></a>,
 so the object will effectively remain cached unless the JVM decides that
 it needs more memory. The main reason not to use them is that these
 references (if reachable) will cause a small performance penalty for the
 garbage collector.
 <h4>Additional information</h4>
 This cache will not maintain references to objects if they were requested
 as <a href="ReferenceType.html#NoRefType"><code>ReferenceType.NoRefType</code></a> or <a href="ReferenceType.html#HardRefType"><code>ReferenceType.HardRefType</code></a>.
 In case one of these two types is specified an unmaintained reference
 will be returned (as returned by
 <a href="GenericReference.html#createReference(T,org.jtrim2.cache.ReferenceType)"><code>GenericReference.createReference(Object, ReferenceType)</code></a>).</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ObjectCache.html#getReference(V,org.jtrim2.cache.ReferenceType)">getReference</a></code>&nbsp;in interface&nbsp;<code><a href="ObjectCache.html" title="interface in org.jtrim2.cache">ObjectCache</a></code></dd>
<dt>Type Parameters:</dt>
<dd><code>V</code> - the type of the cached object</dd>
<dt>Parameters:</dt>
<dd><code>obj</code> - the object to be cached. The returned volatile reference will
   return this object or <code>null</code>. This argument can be <code>null</code>
   but in this case the returned reference will always return
   <code>null</code> and is effectively useless.</dd>
<dd><code>refType</code> - the type of the reference to be used if the passed
   object was removed from this cache. Implementations are expected
   to honor this argument but may ignore it if they document it so.
   This argument cannot be <code>null</code>.</dd>
<dt>Returns:</dt>
<dd>the volatile reference of the passed object (<code>obj</code>). This
   method must never return <code>null</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block">Returns the string representation of this cache in no
 particular format.
 <P>
 This method is intended to be used for debugging only.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Returns:</dt>
<dd>the string representation of this object in no particular format.
   This method never returns <code>null</code>.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
